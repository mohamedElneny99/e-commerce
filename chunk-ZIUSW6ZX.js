import{a as L}from"./chunk-CHA42G6I.js";import{a as T,b as p,c as A,d as N,h as R,i as k,j as q,o as G,q as I}from"./chunk-TFVZPYNB.js";import{f as E,g as w,h as y}from"./chunk-WCUZEMMZ.js";import"./chunk-3KKYHT4Q.js";import{i as h,o as x}from"./chunk-UMW4BRA5.js";import{Cb as F,Db as v,La as o,Mb as r,Qa as g,Wa as b,Wb as _,lb as m,mb as d,qb as u,rb as n,sb as t,tb as f}from"./chunk-LR54IM5D.js";var D=e=>({"is-invalid":e});function j(e,a){e&1&&(n(0,"div",6),r(1," Signup successful! Redirecting... "),t())}function P(e,a){e&1&&(n(0,"div",7),r(1," Signup failed. Please try again. "),t())}function B(e,a){e&1&&(n(0,"span"),r(1,"Email is required."),t())}function V(e,a){e&1&&(n(0,"span"),r(1,"Enter a valid email."),t())}function O(e,a){if(e&1&&(n(0,"div",12),m(1,B,2,0,"span"),m(2,V,2,0,"span"),t()),e&2){let l,i,s=v();o(),d((l=s.signupForm.get("email"))!=null&&l.errors.required?1:-1),o(),d((i=s.signupForm.get("email"))!=null&&i.errors.email?2:-1)}}function U(e,a){e&1&&(n(0,"span"),r(1,"Password is required."),t())}function z(e,a){e&1&&(n(0,"span"),r(1,"Minimum 6 characters."),t())}function H(e,a){if(e&1&&(n(0,"div",12),m(1,U,2,0,"span"),m(2,z,2,0,"span"),t()),e&2){let l,i,s=v();o(),d((l=s.signupForm.get("password"))!=null&&l.errors.required?1:-1),o(),d((i=s.signupForm.get("password"))!=null&&i.errors.minlength?2:-1)}}function J(e,a){e&1&&(n(0,"span"),r(1,"Sign Up"),t())}function K(e,a){e&1&&f(0,"span",17)}var M=class e{constructor(a,l,i){this.fb=a;this.authService=l;this.router=i}signupForm;signupFailed=!1;success=!1;loading=!1;ngOnInit(){this.signupForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]})}onSubmit(){if(this.signupForm.valid){let{email:a,password:l}=this.signupForm.value;this.loading=!0,this.authService.signup(a,l).subscribe({next:()=>{this.success=!0,this.signupFailed=!1,this.loading=!1,setTimeout(()=>this.router.navigate(["/products"]),1500)},error:()=>{this.signupFailed=!0,this.loading=!1}})}else this.signupForm.markAllAsTouched()}static \u0275fac=function(l){return new(l||e)(g(G),g(L),g(E))};static \u0275cmp=b({type:e,selectors:[["app-signup"]],decls:29,vars:14,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"card","shadow","rounded-4"],[1,"card-body","p-4"],[1,"text-center","mb-4","fw-bold","text-success"],[1,"alert","alert-success","text-center"],[1,"alert","alert-danger","text-center"],["novalidate","",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"d-grid","mb-3"],["type","submit",1,"btn","btn-success",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"text-center"],["routerLink","/login","routerLinkActive","active",1,"text-decoration-none","fw-bold"]],template:function(l,i){if(l&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),r(6,"Create Account"),t(),m(7,j,2,0,"div",6),m(8,P,2,0,"div",7),n(9,"form",8),F("ngSubmit",function(){return i.onSubmit()}),n(10,"div",9)(11,"label",10),r(12,"Email"),t(),f(13,"input",11),m(14,O,3,2,"div",12),t(),n(15,"div",9)(16,"label",13),r(17,"Password"),t(),f(18,"input",14),m(19,H,3,2,"div",12),t(),n(20,"div",15)(21,"button",16),m(22,J,2,0,"span"),m(23,K,1,0,"span",17),t()(),n(24,"div",18)(25,"small"),r(26,"Already have an account? "),n(27,"a",19),r(28,"Login"),t()()()()()()()()()),l&2){let s,C,c,S;o(7),d(i.success?7:-1),o(),d(i.signupFailed?8:-1),o(),u("formGroup",i.signupForm),o(4),u("ngClass",_(10,D,((s=i.signupForm.get("email"))==null?null:s.invalid)&&((s=i.signupForm.get("email"))==null?null:s.touched))),o(),d((C=i.signupForm.get("email"))!=null&&C.errors?14:-1),o(4),u("ngClass",_(12,D,((c=i.signupForm.get("password"))==null?null:c.invalid)&&((c=i.signupForm.get("password"))==null?null:c.touched))),o(),d((S=i.signupForm.get("password"))!=null&&S.errors?19:-1),o(2),u("disabled",i.loading||i.signupForm.invalid),o(),d(i.loading?-1:22),o(),d(i.loading?23:-1)}},dependencies:[x,h,I,R,T,A,N,k,q,w,y],encapsulation:2})};export{M as SignupComponent};
