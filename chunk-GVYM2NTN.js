import{a as G,b as p,c as q,d as H,e as L,h as R,i as z,j as J,k as K,l as Q,m as U,o as W,q as X}from"./chunk-TFVZPYNB.js";import{a as P}from"./chunk-3KKYHT4Q.js";import{n as V,o as M}from"./chunk-UMW4BRA5.js";import{Ab as E,Cb as m,Db as b,La as s,Mb as n,Nb as w,Ob as c,Qa as f,Wa as C,X as u,Yb as $,Zb as B,a as g,aa as y,b as _,ea as N,j as I,lb as h,ma as x,mb as T,na as D,nb as j,ob as A,pb as F,qb as O,rb as o,sb as t,tb as k}from"./chunk-LR54IM5D.js";var d=class r{constructor(i){this.http=i}tasksSubject=new I([]);tasks$=this.tasksSubject.asObservable();apiBase="https://products-d2169-default-rtdb.firebaseio.com/tasks";loadTasks(){this.http.get(`${this.apiBase}.json`).pipe(u(i=>{let e=Object.entries(i||{}).map(([a,l])=>_(g({},l),{id:a}));this.tasksSubject.next(e)})).subscribe()}addTask(i){let e=_(g({},i),{createdAt:new Date().toISOString()});this.http.post(`${this.apiBase}.json`,e).pipe(u(()=>this.loadTasks())).subscribe()}deleteTask(i){i&&this.http.delete(`${this.apiBase}/${i}.json`).pipe(u(()=>this.loadTasks())).subscribe()}deleteAllTasks(){this.http.delete(`${this.apiBase}.json`).pipe(u(()=>this.loadTasks())).subscribe()}static \u0275fac=function(e){return new(e||r)(N(P))};static \u0275prov=y({token:r,factory:r.\u0275fac,providedIn:"root"})};var v=class r{constructor(i,e){this.fb=i;this.taskService=e}form=new L({});ngOnInit(){this.form=this.fb.group({title:["",p.required],desc:["",p.required],assignedTo:["",p.required],priority:["Critical",p.required],status:["In Progress",p.required]})}submit(){if(this.form.valid){let{title:i,desc:e,assignedTo:a,priority:l,status:S}=this.form.value;this.taskService.addTask({title:i,desc:e,assignedTo:a,priority:l,status:S}),this.form.reset({title:"",desc:"",assignedTo:"",priority:"Critical",status:"In Progress"})}}static \u0275fac=function(e){return new(e||r)(f(W),f(d))};static \u0275cmp=C({type:r,selectors:[["app-create-task"]],decls:22,vars:1,consts:[[1,"card","p-3","mt-3","shadow-sm",3,"ngSubmit","formGroup"],["formControlName","title","placeholder","Title",1,"form-control","mb-2"],["formControlName","desc","placeholder","Description",1,"form-control","mb-2"],["formControlName","assignedTo","placeholder","Assigned To",1,"form-control","mb-2"],["formControlName","priority",1,"form-control","mb-2"],["formControlName","status",1,"form-control","mb-2"],[1,"btn","btn-success"]],template:function(e,a){e&1&&(o(0,"form",0),m("ngSubmit",function(){return a.submit()}),k(1,"input",1)(2,"textarea",2)(3,"input",3),o(4,"select",4)(5,"option"),n(6,"Low"),t(),o(7,"option"),n(8,"Medium"),t(),o(9,"option"),n(10,"High"),t(),o(11,"option"),n(12,"Critical"),t()(),o(13,"select",5)(14,"option"),n(15,"Pending"),t(),o(16,"option"),n(17,"In Progress"),t(),o(18,"option"),n(19,"Completed"),t()(),o(20,"button",6),n(21,"Add Task"),t()()),e&2&&O("formGroup",a.form)},dependencies:[X,R,Q,U,G,K,q,H,z,J],encapsulation:2})};function ie(r,i){if(r&1){let e=E();o(0,"button",4),m("click",function(){x(e);let l=b();return D(l.deleteAllTasks())}),n(1,"Delete All"),t()}}function ne(r,i){r&1&&k(0,"app-create-task")}function oe(r,i){if(r&1){let e=E();o(0,"div",5)(1,"h5"),n(2),t(),o(3,"p"),n(4),t(),o(5,"p")(6,"strong"),n(7,"Assigned to:"),t(),n(8),t(),o(9,"p")(10,"strong"),n(11,"Priority:"),t(),n(12),t(),o(13,"p")(14,"strong"),n(15,"Status:"),t(),n(16),t(),o(17,"p")(18,"strong"),n(19,"Created:"),t(),n(20),t(),o(21,"button",6),m("click",function(){let l=x(e).$implicit,S=b(2);return D(S.deleteTask(l.id))}),n(22,"Delete"),t(),o(23,"button",7),k(24,"img",8),t()()}if(r&2){let e=i.$implicit,a=b(2);s(2),w(e.title),s(2),w(e.desc),s(4),c(" ",e.assignedTo),s(4),c(" ",e.priority),s(4),c(" ",e.status),s(4),c(" ",a.formatDate(e.createdAt))}}function re(r,i){if(r&1&&(o(0,"div",3),A(1,oe,25,6,"div",5,j),$(3,"async"),t()),r&2){let e=b();s(),F(B(3,0,e.tasks$))}}var ee=class r{constructor(i){this.taskService=i}showCreateTask=!1;tasks$;ngOnInit(){this.tasks$=this.taskService.tasks$,this.taskService.loadTasks()}deleteTask(i){this.taskService.deleteTask(i)}deleteAllTasks(){this.taskService.deleteAllTasks()}formatDate(i){return new Date(i).toLocaleString()}static \u0275fac=function(e){return new(e||r)(f(d))};static \u0275cmp=C({type:r,selectors:[["app-dashboard"]],decls:8,vars:4,consts:[[1,"container","mt-4"],[1,"btn","btn-primary","mb-3",3,"click"],[1,"btn","btn-danger","mb-3","btn-md"],[1,"mt-4"],[1,"btn","btn-danger","mb-3","btn-md",3,"click"],[1,"card","p-3","mb-3","shadow-sm"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"btn","btn-info"],["src","/app/tasks/dashboard/edit-button.png","alt","Edit-Task",2,"width","16px","height","16px"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"h2"),n(2,"Dashboard"),t(),o(3,"button",1),m("click",function(){return a.showCreateTask=!a.showCreateTask}),n(4),t(),h(5,ie,2,0,"button",2),h(6,ne,1,0,"app-create-task"),h(7,re,4,2,"div",3),t()),e&2&&(s(4),c(" ",a.showCreateTask?"Hide Task Form":"Add Task",`
`),s(),T(a.showCreateTask?5:-1),s(),T(a.showCreateTask?6:-1),s(),T(a.showCreateTask?7:-1))},dependencies:[M,v,V],encapsulation:2})};export{ee as DashboardComponent};
