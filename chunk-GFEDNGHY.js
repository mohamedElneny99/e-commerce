import{a as q}from"./chunk-CHA42G6I.js";import{a as k,b as c,c as T,d as I,h as N,i as P,j as A,o as M,q as R}from"./chunk-TFVZPYNB.js";import{f as L,g as E,h as y}from"./chunk-WCUZEMMZ.js";import"./chunk-3KKYHT4Q.js";import{i as S,o as x}from"./chunk-UMW4BRA5.js";import{Cb as _,Db as f,La as o,Mb as a,Ob as C,Qa as g,Wa as F,Wb as b,lb as m,mb as s,qb as p,rb as t,sb as n,tb as v}from"./chunk-LR54IM5D.js";var D=i=>({"is-invalid":i});function V(i,l){if(i&1&&(t(0,"div",6),a(1),n()),i&2){let r=f();o(),C(" ",r.errorMessage||"Invalid email or password."," ")}}function j(i,l){i&1&&(t(0,"span"),a(1,"Email is required."),n())}function B(i,l){i&1&&(t(0,"span"),a(1,"Enter a valid email."),n())}function O(i,l){if(i&1&&(t(0,"div",11),m(1,j,2,0,"span"),m(2,B,2,0,"span"),n()),i&2){let r,e,d=f();o(),s((r=d.loginForm.get("email"))!=null&&r.errors.required?1:-1),o(),s((e=d.loginForm.get("email"))!=null&&e.errors.email?2:-1)}}function H(i,l){i&1&&(t(0,"span"),a(1,"Password is required."),n())}function z(i,l){i&1&&(t(0,"span"),a(1,"Minimum 6 characters."),n())}function J(i,l){if(i&1&&(t(0,"div",17),m(1,H,2,0,"span"),m(2,z,2,0,"span"),n()),i&2){let r,e,d=f();o(),s((r=d.loginForm.get("password"))!=null&&r.errors.required?1:-1),o(),s((e=d.loginForm.get("password"))!=null&&e.errors.minlength?2:-1)}}function K(i,l){i&1&&(t(0,"span"),a(1,"Login"),n())}function Q(i,l){i&1&&v(0,"span",22)}var G=class i{constructor(l,r,e){this.fb=l;this.router=r;this.authService=e}loginForm;loginFailed=!1;errorMessage="";loading=!1;showPassword=!1;currentRoute="";ngOnInit(){this.loginForm=this.fb.group({email:["",[c.required,c.email]],password:["",[c.required,c.minLength(6)]]})}togglePasswordVisibility(){this.showPassword=!this.showPassword}onSubmit(){if(this.loginForm.valid){let{email:l,password:r}=this.loginForm.value;this.loading=!0,this.authService.login(l,r).subscribe({next:e=>{this.loading=!1,this.loginFailed=!1,this.router.navigate(["/products"])},error:e=>{this.loading=!1,this.loginFailed=!0,this.errorMessage=e,console.error("Login error:",e)}})}else this.loginForm.markAllAsTouched()}static \u0275fac=function(r){return new(r||i)(g(M),g(L),g(q))};static \u0275cmp=F({type:i,selectors:[["app-login"]],decls:34,vars:15,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"card","shadow","rounded-4"],[1,"card-body","p-4"],[1,"text-center","mb-4","fw-bold","text-primary"],[1,"alert","alert-danger","text-center"],["novalidate","",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],[1,"mb-1","position-relative"],["for","password",1,"form-label"],[1,"input-group"],["id","password","formControlName","password",1,"form-control",3,"type","ngClass"],["type","button","tabindex","-1",1,"btn","btn-outline-secondary",3,"click"],[1,"invalid-feedback","d-block"],[1,"mb-3","text-end"],["routerLink","/forgot-password","routerLinkActive","active",1,"text-decoration-none"],[1,"d-grid","mb-3"],["type","submit",1,"btn","btn-primary",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"text-center"],["routerLink","/signup","routerLinkActive","active",1,"text-decoration-none","fw-bold"]],template:function(r,e){if(r&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),a(6,"Login"),n(),m(7,V,2,1,"div",6),t(8,"form",7),_("ngSubmit",function(){return e.onSubmit()}),t(9,"div",8)(10,"label",9),a(11,"Email address"),n(),v(12,"input",10),m(13,O,3,2,"div",11),n(),t(14,"div",12)(15,"label",13),a(16,"Password"),n(),t(17,"div",14),v(18,"input",15),t(19,"button",16),_("click",function(){return e.togglePasswordVisibility()}),a(20),n()(),m(21,J,3,2,"div",17),n(),t(22,"div",18)(23,"a",19),a(24,"Forgot password?"),n()(),t(25,"div",20)(26,"button",21),m(27,K,2,0,"span"),m(28,Q,1,0,"span",22),n()(),t(29,"div",23)(30,"small"),a(31,"Don't have an account? "),t(32,"a",24),a(33,"Create one"),n()()()()()()()()()),r&2){let d,h,u,w;o(7),s(e.loginFailed?7:-1),o(),p("formGroup",e.loginForm),o(4),p("ngClass",b(11,D,((d=e.loginForm.get("email"))==null?null:d.invalid)&&((d=e.loginForm.get("email"))==null?null:d.touched))),o(),s((h=e.loginForm.get("email"))!=null&&h.errors?13:-1),o(5),p("type",e.showPassword?"text":"password")("ngClass",b(13,D,((u=e.loginForm.get("password"))==null?null:u.invalid)&&((u=e.loginForm.get("password"))==null?null:u.touched))),o(2),C(" ",e.showPassword?"Hide":"Show"," "),o(),s((w=e.loginForm.get("password"))!=null&&w.errors?21:-1),o(5),p("disabled",e.loginForm.invalid||e.loading),o(),s(e.loading?-1:27),o(),s(e.loading?28:-1)}},dependencies:[x,S,R,N,k,T,I,P,A,E,y],encapsulation:2})};export{G as LoginComponent};
