
<div
  *ngIf="showToast"
  class="toast show position-fixed top-0 end-0 p-3"
  style="z-index: 1055; background-color: #198754; color: white; border-radius: 8px;"
>
  <div class="d-flex">
    <div class="toast-body">{{ toastMessage }}</div>
    <button
      type="button"
      class="btn-close btn-close-white ms-2 me-2 m-auto"
      (click)="showToast = false"
    ></button>
  </div>
</div>

<input
  type="text"
  class="form-control mb-3"
  placeholder="ابحث عن منتج..."
  [(ngModel)]="searchBar"
/>


<div class="row g-4">
  <div class="col-12 col-sm-6 col-md-4 col-lg-3" *ngFor="let product of filteredProducts()">
    <div class="card shadow-lg h-100">
      <img
        [src]="product.imageUrl"
        class="card-img-top"
        alt="{{ product.name }}"
        style="height: 180px; object-fit: contain;"
      />

      

      <div class="card-body d-flex flex-column justify-content-between">
        <h5 class="card-title">{{ product.name }}</h5>
        <p class="card-text text-muted">
          {{ product.gender }} • {{ product.category }} • {{ product.brand }}
        </p>
        <p class="card-text">Price: <strong>${{ product.price }}</strong></p>
        <p class="card-text">{{ product.color.length }} colors • Best Seller</p>
        <p
          class="card-text"
          [ngStyle]="{ color: product.is_in_inventory ? 'green' : 'red' }"
        >
          {{ product.is_in_inventory ? 'Available in stock' : 'Not available' }}
        </p>


        <div class="mb-2">
          <ng-container *ngFor="let star of [1, 2, 3, 4, 5]">
            <i
              class="bi"
              [ngClass]="{
                'bi-star-fill': star <= product.rating,
                'bi-star': star > product.rating
              }"
              style="color: gold;"
            ></i>
          </ng-container>
        </div>
      </div>

      <div class="card-footer bg-transparent border-top-0">
        <button
          class="btn btn-outline-primary w-100"
          (click)="addToCart(product)"
        >
          Add to Cart
        </button>
        <button
          class="btn btn-outline-primary w-50 mt-3"
          [routerLink]="['/buy', product.id]"
        >
          Buy Now
        </button>
        <button
          class="btn btn-outline-primary w-50 mt-3"
          [routerLink]="['/product', product.id]"
        >
          Details
        </button>
      </div>
    </div>
  </div>



  <p *ngIf="filteredProducts().length === 0">No results found.</p>
</div>


